<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Song of the Day</title>
</head>
<body style="background: #141414; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white;">
    <h2 id="date"></h2>

    <label for="artist">Artist</label>
    <input type="text" name="Artist" id="artist">
   
    <label for="title">Title</label>
    <input type="text" name="Title" id="title">

    <label for="id">Video ID</label>
    <input type="text" name="Video ID" id="id">

    <label for="url">Cover URL</label>
    <input type="text" name="Cover URL" id="url">

    <label for="background">Background URL</label>
    <input type="text" name="Background URL" id="background">

    <label for="remix">Remix</label>
    <input type="checkbox" name="Remix" id="remix">

    <button id="upload">UPLOAD</button>

    <script type="module">
        //#region FIREBASE INIT
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.16.0/firebase-app.js";
        import { getFirestore, setDoc, addDoc, collection, doc, getDoc } from 'https://www.gstatic.com/firebasejs/9.16.0/firebase-firestore.js';

        const firebaseConfig = {
        apiKey: "AIzaSyCo_urqG3I5MEb1eBCmHOJm15ufWzW5Vbo",
        authDomain: "odos-375812.firebaseapp.com",
        projectId: "odos-375812",
        storageBucket: "odos-375812.appspot.com",
        messagingSenderId: "377747953042",
        appId: "1:377747953042:web:61fdf5c517003581ce9d4b",
        measurementId: "G-R8SCX24SWJ"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        //#endregion

        const date = new Date();
        const dateH2 = document.querySelector('#date');
        const artist = document.querySelector('#artist');
        const title = document.querySelector('#title');
        const id = document.querySelector('#id');
        const url = document.querySelector('#url');
        const background = document.querySelector('#background');
        const remix = document.querySelector('#remix');
        const upload = document.querySelector('#upload');

        dateH2.innerText = `${date.getDate()}${date.getMonth()+1}${date.getFullYear()}`;

        upload.addEventListener('click', () => {
            try {
                const songRef = doc(db, 'song-collection', dateH2.innerText);
                setDoc(songRef, {
                    artist: artist.value,
                    title: title.value,
                    id: id.value,
                    url: url.value,
                    background: background.value,
                    remix: remix.checked
                });

                let inputs = document.querySelectorAll('input');
                inputs.forEach((input) => { input.value = null; });
            }
            catch (e) {
                console.error('Error adding document:', e);
            }
         });
    </script>
</body>
</html>